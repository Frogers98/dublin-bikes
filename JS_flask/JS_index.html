<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Flask App</title>
    <meta name="description" content="First index.html">
    <meta name="author" content="JaneSlevin">
    <link rel="stylesheet" type="text/css" href="../FR_flask/static/style.css" />
    <link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet" type="text/css">

<!--  <link rel="stylesheet" href="css/styles.css?v=1.0">-->

</head>

<body>
<div id="header">Header</div>
<div id="map"></div>

<script>

    let map;

    function initMap() {
        fetch("/stations").then(response => {
            return response.json();
        }).then(data => {
            console.log("data:", data);

            map = new google.maps.Map(document.getElementById("map"), {
                center: {lat: 53.349804, lng: -6.260310},
                zoom: 12,
            });

            data.forEach(station => {
                new google.maps.Marker({
                    position: {lat: station.position_lat, lng: station.position_long},
                    map: map,
                })
            })

        }).catch(err => {
            console.log("Oops!", err);
        })

    }

    <!-- Async script executes immediately and must be after any DOM elements used in callback. -->

</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDbU4W2J29Zz3Jz8gkcgImNj4YRwgLZCoQ&callback=initMap&libraries=&v=weekly" async></script>

</body>
</html>